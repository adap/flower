services:
  supernode-1:
    command:
      - --superlink
      - ${SUPERLINK_IP:-127.0.0.1}:9092
      - --supernode-address
      - 0.0.0.0:9094
      - --isolation
      - process
      - --node-config
      - "partition-id=0 num-partitions=2"
      - --root-certificates
      - certificates/ca.crt
    secrets:
      - source: superlink-ca-certfile
        target: /app/certificates/ca.crt

  supernode-2:
    command:
      - --superlink
      - ${SUPERLINK_IP:-127.0.0.1}:9092
      - --supernode-address
      - 0.0.0.0:9095
      - --isolation
      - process
      - --node-config
      - "partition-id=1 num-partitions=2"
      - --root-certificates
      - certificates/ca.crt
    secrets:
      - source: superlink-ca-certfile
        target: /app/certificates/ca.crt

  # uncomment to enable TLS on another SuperNode
  #

secrets:
  superlink-ca-certfile:
    file: ../superlink-certificates/ca.crt
