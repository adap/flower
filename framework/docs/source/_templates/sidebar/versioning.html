{% if versions %}

<script>
function checkPageExistence(versionName, current_language, pagename) {
  var newUrl = `https://flower.ai/docs/framework/${versionName}/${current_language}/${pagename}.html`;
  var fallbackUrl = `https://flower.ai/docs/framework/${versionName}/${current_language}/index.html#references`;

  fetch(newUrl)
    .then(response => {
      if (response.ok) {
        window.location.href = newUrl;
      } else {
        window.location.href = fallbackUrl;
      }
    })
    .catch(error => {
      console.error('Error:', error);
      window.location.href = fallbackUrl;
    });
}
</script>

<style>
.sidebar-tree-versions {
  margin-top: 0;
}
</style>

<div class="sidebar-tree sidebar-tree-versions">
  <p class="caption" role="heading"><span class="caption-text">More</span></p>
  <ul>
    <li class="toctree-l1 has-children">
      <a class="reference">Versions</a>
      <input class="toctree-checkbox" id="toctree-checkbox-versions" name="toctree-checkbox-versions" role="switch" type="checkbox"/>
      <label for="toctree-checkbox-versions">
        <div class="visually-hidden">Toggle navigation of Versions</div>
        <i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i>
      </label>
      <ul>
        {%- for item in versions %}
        <li class="toctree-l2">
          <a class="reference" href="javascript:void(0);"
             onclick="checkPageExistence('{{ item.name }}', '{{ current_language }}', '{{ pagename }}')">
             {{ item.name }}
          </a>
        </li>
        {%- endfor %}
      </ul>
    </li>
  </ul>
</div>
{% endif %}
