// Copyright 2026 Flower Labs GmbH. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
// ==============================================================================

syntax = "proto3";

package flwr.proto;

import "flwr/proto/node.proto";

enum EventType {
  // Round lifecycle events
  ROUND_STARTED = 0;
  ROUND_FIT_STARTED = 1;
  ROUND_FIT_AGGREGATED = 2;
  ROUND_FIT_FAILED = 3;
  ROUND_EVALUATE_STARTED = 4;
  ROUND_EVALUATE_AGGREGATED = 5;
  ROUND_EVALUATE_FAILED = 6;
  ROUND_COMPLETED = 7;
  ROUND_FAILED = 8;

  // Run lifecycle events
  RUN_STARTED = 9;
  RUN_COMPLETED = 10;
  RUN_FAILED = 11;

  // Node task events
  NODE_FIT_STARTED = 12;
  NODE_FIT_COMPLETED = 13;
  NODE_FIT_FAILED = 14;
  NODE_EVALUATE_STARTED = 15;
  NODE_EVALUATE_COMPLETED = 16;
  NODE_EVALUATE_FAILED = 17;

  // Node lifecycle events
  NODE_CONNECTED = 18;
  NODE_DISCONNECTED = 19;
}

message Event {
  double timestamp = 1;
  optional uint64 run_id = 2;
  uint64 node_id = 3;
  EventType event_type = 4;
  map<string, string> metadata = 5;
}

message PushEventsRequest {
  Node node = 1;
  uint64 run_id = 2;
  repeated Event events = 3;
}

message PushEventsResponse {}
